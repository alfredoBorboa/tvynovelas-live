<!doctype html>
<html>
<head>
<title>Votación Live Tv y Novelas 2015</title>

<script src="/socket.io/socket.io.js"></script>
<script src="resources/jquery.min.js"></script>

</head>

<body>
<h1>Monitor Categoría 1: <span id="votosTotales"></span></h1>
<div id="candidatos">
<div id="ac1">Candidato 1: <span id="conteoAc1"></span><br/></div><br/>
<div id="ac2">Candidato 2: <span id="conteoAc2"></span><br/></div><br/>
<div id="ac3">Candidato 3: <span id="conteoAc3"></span><br/></div><br/>
<div id="ac4">Candidato 4: <span id="conteoAc4"></span><br/></div><br/>
<div id="ac5">Candidato 5: <span id="conteoAc5"></span><br/></div><br/>
</div> <!-- candidatos -->
<script>
  var socket = io();
  var contador = 0;
  var contadorAc1 = 0;
  var contadorAc2 = 0;
  var contadorAc3 = 0;
  var contadorAc4 = 0;
  var contadorAc5 = 0;

  socket.on('voto', function(msg){

  if( contador < 13 ){
    
    // categoria A jurado 1
    if( msg == "ac1j1" ){
      $("#ac1").append("Jurado 1<br/>");
      contadorAc1++;
      $( "#conteoAc1" ).html( contadorAc1 );
      contador++;
    }
    if( msg == "ac2j1" ){
      $("#ac2").append("Jurado 1<br/>");
      contadorAc2++;
      $( "#conteoAc2" ).html( contadorAc2 );
      contador++;
    }
    if( msg == "ac3j1" ){
      $("#ac3").append("Jurado 1<br/>");
      contadorAc3++;
      $( "#conteoAc3" ).html( contadorAc3 );
      contador++;
    }
    if( msg == "ac4j1" ){
      $("#ac4").append("Jurado 1<br/>");
      contadorAc4++;
      $( "#conteoAc4" ).html( contadorAc4 );
      contador++;
    }
    if( msg == "ac5j1" ){
      $("#ac5").append("Jurado 1<br/>");
      contadorAc5++;
      $( "#conteoAc5" ).html( contadorAc5 );
      contador++;
    }
    
    //categoria A jurado 2
    if( msg == "ac1j2" ){
      $("#ac1").append("Jurado 2 <br/>"); 
      contadorAc1++;
      $( "#conteoAc1" ).html( contadorAc1 );
      contador++;
    }
    if( msg == "ac2j2" ){
      $("#ac2").append("Jurado 2<br/>");
      contadorAc2++;
      $( "#conteoAc2" ).html( contadorAc2 );
      contador++;
    }
    if( msg == "ac3j2" ){
      $("#ac3").append("Jurado 2<br/>");
      contadorAc3++;
      $( "#conteoAc3" ).html( contadorAc3 );
      contador++;
    }
    if( msg == "ac4j2" ){
      $("#ac4").append("Jurado 2<br/>");
      contadorAc4++;
      $( "#conteoAc4" ).html( contadorAc4 );
      contador++;
    }
    if( msg == "ac5j2" ){
      $("#ac5").append("Jurado 2<br/>");
      contadorAc5++;
      $( "#conteoAc5" ).html( contadorAc5 );
      contador++;
    }

    $( "#votosTotales" ).html( contador );

  } // if contador < 13
  
  if( contador == 13 ){
    $( "#votosTotales" ).html( "Votos Completos" );
    
    var arrayTotalesAc = [ contadorAc1, contadorAc2, contadorAc3, contadorAc4, contadorAc5 ];
    var votoMaximoAc = Math.max( contadorAc1, contadorAc2, contadorAc3, contadorAc4, contadorAc5); 
    var candidatosAc = [ "Candidato 1", "Candidato 2", "Candidato 3", "Candidato 4", "Candidato 5" ];
    var arrayGanadores = [];

    for( var i = 0; i < arrayTotalesAc.length; i++ ){
      if( arrayTotalesAc[ i ] == votoMaximoAc ){
        arrayGanadores.push( candidatosAc[ i ] );
      }
    }
    
    if( arrayGanadores.length == 1 ){
      $( "#votosTotales" ).html( "Ganador: " + arrayGanadores[ 0 ] );
    }
    if( arrayGanadores.length > 1 ){
      $( "#votosTotales" ).html( "Empate!!!" );
      $( "#candidatos" ).html( "" );
      for( var i = 0; i < arrayGanadores.length; i++ ){
        $( "#candidatos" ).append( "<div id='ac" + ( i + 1 ) + "'>" + arrayGanadores[ i ] + ": <span id='conteoAc" + ( i + 1 ) + "'></span><br/></div><br/>" );
      } 
    }
    
    
  } // if contador == 13

  }); // socket.on voto   
</script>
</body>
</html>
